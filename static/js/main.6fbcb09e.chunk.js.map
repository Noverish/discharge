{"version":3,"sources":["models/index.ts","components/Header.tsx","envs.ts","utils/date-util.ts","utils/process-person.ts","components/WelcomeOverlay.tsx","components/InfoPane.tsx","components/PeopleRow.tsx","components/PeopleTable.tsx","redux/index.ts","api/index.ts","components/SettingModal.tsx","components/DateRangeInput.tsx","App.tsx","index.tsx"],"names":["Rank","className","navClasses","classnames","href","type","data-toggle","data-target","id","target","rel","CORPORAL_REDUCE_DATE","Date","PRIVATE_FIRST_REDUCE_DATE","PRIVATE_REDUCE_DATE","cloneAndSet12AM","date","clone","setHours","setMinutes","setSeconds","setMilliseconds","dateToString","year","getFullYear","month","getMonth","toString","padStart","day","getDate","addMonth","months","setMonth","addDay","days","setDate","addSecond","seconds","getSeconds","monthDiff","date2","date1","dayDiff","date1Clone","date2Clone","Math","ceil","getTime","secondDiff","floor","setDay1AndMidnight","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","secondsToString","sec","minutes","min","hours","hour","to","from","setFullYear","calcMaxGrade","rank","join","private","privateFirst","corporal","Error","processPerson","person","now","promotionDates","transfer","discharge","penalty","forEach","v","privatePenalty","privateFirstPenalty","corporalPenalty","privateMaxGrade","privateFirstMaxGrade","corporalMaxGrade","dateUtil","sergeant","calcPromotionDates","dates","human","trainee","grade","broken","totalSergeantDays","fulfilled","calcStatus","rankString","rankToKorean","daysTotal","daysPast","daysLeft","max","secondsTotal","secondsPast","secondsLeft","rate","percent","toFixed","name","WelcomeStatus","canDischarge","toUpperCase","index","isMe","active","includes","progressParentClasses","progressClasses","textInside","parseInt","progressTextClass","progressTextContent","progressText","me","style","width","rows","persons","map","i","toDateString","PeopleRow","key","status","onTransitionEnd","blurLevel","titleClasses","dateClasses","textShadow","peopleSlice","createSlice","initialState","reducers","setPeople","_","act","payload","nowSlice","setNow","addOneSec","state","setNowDate","settingSlice","setSetting","rootReducer","combineReducers","people","reducer","setting","store","configureStore","actions","request","data","Promise","resolve","reject","headers","encodeURI","axios","url","then","res","catch","err","React","memo","dispatch","useDispatch","useSelector","useState","errMsg","setErrMsg","onSubmit","useCallback","document","getElementById","value","isNaN","length","find","click","alert","role","data-dismiss","action","placeholder","defaultValue","color","onClick","onChange","e","n","App","showing","welcomeStatus","setWelcomeStatus","useEffect","peopleParam","setInterval","setTimeout","closing","filter","p","processToPerson","WelcomeOverlay","closed","Header","blur","marginTop","InfoPane","toLocaleString","DateRangeInput","PeopleTable","SettingModal","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.6fbcb09e.chunk.js","sourcesContent":["export interface PersonDao {\n  name: string;\n  join: string;\n  transfer: string;\n  discharge: string;\n  penalty: number[];\n}\n\nexport enum Rank {\n  human = 'human',\n  trainee = 'trainee',\n  private = 'private',\n  privateFirst = 'private-first',\n  corporal = 'corporal',\n  sergeant = 'sergeant',\n  fulfilled = 'fulfilled',\n}\n\nexport interface Person {\n  name: string;\n  join: Date;\n  transfer: Date;\n  discharge: Date;\n  rank: Rank;\n  rankString: string;\n  grade?: number;\n  broken?: boolean;\n  daysTotal: number;\n  daysPast: number;\n  daysLeft: number;\n  secondsTotal: number;\n  secondsPast: number;\n  secondsLeft: number;\n  percent: string;\n}\n","import React from 'react';\nimport classnames from 'classnames';\n\ninterface Props {\n  className?: string;\n}\n\nexport default ({ className }: Props) => {\n  const navClasses = classnames('navbar navbar-default navbar-fixed-top', className);\n\n  return (\n    <nav className={navClasses}>\n      <div className=\"container-fluid\">\n        <div className=\"navbar-header\">\n          <a href=\"/\" className=\"navbar-brand\">정신과 시간의 방</a>\n          <button className=\"navbar-toggle\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar-main\">\n            <span className=\"icon-bar\" />\n            <span className=\"icon-bar\" />\n            <span className=\"icon-bar\" />\n          </button>\n        </div>\n        <div className=\"navbar-collapse collapse\" id=\"navbar-main\">\n          <ul className=\"nav navbar-nav navbar-right\">\n            <li><a href=\"https://github.com/Noverish/discharge\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"btn btn-link\">Github</a></li>\n          </ul>\n          <ul className=\"nav navbar-nav navbar-right\">\n            <li><button type=\"button\" className=\"btn btn-default navbar-btn\" data-toggle=\"modal\" data-target=\"#myModal\">Settings</button></li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n};\n","// 호봉: grade\n// 계급: level, rank\n// 진급: promote\n// 전입: transfer\n// 입대: join\n\nexport const FULFILLED_REMAIN_DAYS = 7; // 전역 후 그래프에 남겨 놓는 날짜 수\nexport const WELCOME_SHOW_MILLIS = 1800;\nexport const CAN_DISCHARGE_DAY = 31;\nexport const DISCHARGE_START_DATE = '2016-11-11';\n\n// 2018년  4월 군번부터 상병이 6호봉\n// 2018년 11월 군번부터 일병이 6호봉\n// 2019년  6월 군번부터 이병이 3호봉\nexport const CORPORAL_REDUCE_DATE = new Date('2018-04-01');\nexport const PRIVATE_FIRST_REDUCE_DATE = new Date('2018-11-01');\nexport const PRIVATE_REDUCE_DATE = new Date('2019-06-01');\n\n// 이병 최대 호봉: 3\n// 일병 최대 호봉: 6\n// 상병 최대 호봉: 6\nexport const PRIVATE_MAX_GRADE = 3;\nexport const PRIVATE_FIRST_MAX_GRADE = 6;\nexport const CORPORAL_MAX_GRADE = 6;\n\nexport const NAME_HEADER_NAME = 'x-discharge-name';\nexport const DATE_HEADER_NAME = 'x-discharge-date';\nexport const TARGET_DATE_NAME = 'x-discharge-target-date';\n","function cloneAndSet12AM(date: Date): Date {\n  const clone = new Date(date);\n  clone.setHours(0);\n  clone.setMinutes(0);\n  clone.setSeconds(0);\n  clone.setMilliseconds(0);\n  return clone;\n}\n\nexport function dateToString(date: Date) {\n  const year = date.getFullYear();\n  const month: string = (date.getMonth() + 1).toString().padStart(2, '0');\n  const day: string = (date.getDate()).toString().padStart(2, '0');\n\n  return `${year}/${month}/${day}`;\n}\n\nexport function addMonth(date: Date, months: number): Date {\n  date.setMonth(date.getMonth() + months);\n  return date;\n}\n\nexport function addDay(date: Date, days: number): Date {\n  date.setDate(date.getDate() + days);\n  return date;\n}\n\nexport function addSecond(date: Date, seconds: number): Date {\n  date.setSeconds(date.getSeconds() + seconds);\n  return date;\n}\n\nexport function monthDiff(date2: Date, date1: Date): number {\n  const yearDiff = date2.getFullYear() - date1.getFullYear();\n  return (yearDiff * 12) + date2.getMonth() - date1.getMonth();\n}\n\nexport function dayDiff(date2: Date, date1: Date): number {\n  const date1Clone = cloneAndSet12AM(date1);\n  const date2Clone = cloneAndSet12AM(date2);\n\n  return Math.ceil((date2Clone.getTime() - date1Clone.getTime()) / 86400000);\n}\n\nexport function secondDiff(date2: Date, date1: Date): number {\n  return Math.floor((date2.getTime() - date1.getTime()) / 1000);\n}\n\nexport function setDay1AndMidnight(date: Date): Date {\n  date.setDate(1);\n  date.setUTCHours(9);\n  date.setUTCMinutes(0);\n  date.setUTCSeconds(0);\n  date.setUTCMilliseconds(0);\n  return date;\n}\n\nexport function secondsToString(seconds: number): string {\n  const sec = (seconds % 60).toString().padStart(2, '0');\n  const minutes = Math.floor(seconds / 60);\n\n  const min = (minutes % 60).toString().padStart(2, '0');\n  const hours = Math.floor(minutes / 60);\n\n  const hour = (hours % 24).toString().padStart(2, '0');\n  const days = Math.floor(hours / 24);\n\n  return `${days}일 ${hour}시간 ${min}분 ${sec}초`;\n}\n\nexport function setDate(to: Date, from: Date) {\n  to.setFullYear(from.getFullYear());\n  to.setMonth(from.getMonth());\n  to.setDate(from.getDate());\n  return to;\n}\n","import {\n  PRIVATE_MAX_GRADE,\n  PRIVATE_FIRST_MAX_GRADE,\n  CORPORAL_MAX_GRADE,\n  PRIVATE_REDUCE_DATE,\n  PRIVATE_FIRST_REDUCE_DATE,\n  CORPORAL_REDUCE_DATE,\n} from 'src/envs';\nimport { Person, PersonDao, Rank } from 'src/models';\nimport * as dateUtil from './date-util';\n\ninterface PromotionDates {\n  join: Date;\n  transfer: Date;\n  privateFirst: Date;\n  corporal: Date;\n  sergeant: Date;\n  discharge: Date;\n}\n\nfunction rankToKorean(rank: Rank) {\n  switch (rank) {\n    case Rank.human: return '민간인';\n    case Rank.trainee: return '훈련병';\n    case Rank.private: return '이병';\n    case Rank.privateFirst: return '일병';\n    case Rank.corporal: return '상병';\n    case Rank.sergeant: return '병장';\n    case Rank.fulfilled: return '예비역';\n    default: throw new Error('Unexpected value');\n  }\n}\n\nfunction calcMaxGrade(rank: Rank.private | Rank.privateFirst | Rank.corporal, join: Date): number {\n  switch (rank) {\n    case Rank.private: {\n      const extraGrade = join.getTime() < PRIVATE_REDUCE_DATE.getTime() ? 1 : 0;\n      return PRIVATE_MAX_GRADE + extraGrade;\n    }\n    case Rank.privateFirst: {\n      const extraGrade = join.getTime() < PRIVATE_FIRST_REDUCE_DATE.getTime() ? 1 : 0;\n      return PRIVATE_FIRST_MAX_GRADE + extraGrade;\n    }\n    case Rank.corporal: {\n      const extraGrade = join.getTime() < CORPORAL_REDUCE_DATE.getTime() ? 1 : 0;\n      return CORPORAL_MAX_GRADE + extraGrade;\n    }\n    default: throw new Error('Unexpected value');\n  }\n}\n\nfunction calcPromotionDates(person: PersonDao): PromotionDates {\n  const join = new Date(person.join);\n  const transfer = new Date(person.transfer);\n  const discharge = new Date(person.discharge);\n\n  const penalty = [0, 0, 0];\n  person.penalty.forEach((v) => { penalty[v] += 1; });\n  const [privatePenalty, privateFirstPenalty, corporalPenalty] = penalty;\n\n  const privateMaxGrade = calcMaxGrade(Rank.private, join) + privatePenalty;\n  const privateFirstMaxGrade = calcMaxGrade(Rank.privateFirst, join) + privateFirstPenalty;\n  const corporalMaxGrade = calcMaxGrade(Rank.corporal, join) + corporalPenalty;\n\n  const privateFirst = dateUtil.addMonth(new Date(join), privateMaxGrade);\n  const corporal = dateUtil.addMonth(new Date(privateFirst), privateFirstMaxGrade);\n  const sergeant = dateUtil.addMonth(new Date(corporal), corporalMaxGrade);\n  privateFirst.setDate(1);\n  corporal.setDate(1);\n  sergeant.setDate(1);\n\n  return { join, transfer, privateFirst, corporal, sergeant, discharge };\n}\n\nfunction calcStatus(dates: PromotionDates, now: Date) {\n  const { join, transfer, privateFirst, corporal, sergeant, discharge } = dates;\n\n  if (now < join) {\n    return { rank: Rank.human };\n  }\n  if (join <= now && now < transfer) {\n    return { rank: Rank.trainee };\n  }\n  if (transfer <= now && now < privateFirst) {\n    const grade = dateUtil.monthDiff(now, join) + 1;\n    return { grade, rank: Rank.private };\n  }\n  if (privateFirst <= now && now < corporal) {\n    const privateMaxGrade = dateUtil.monthDiff(corporal, privateFirst);\n    const grade = dateUtil.monthDiff(now, privateFirst) + 1;\n    const broken = grade > Math.ceil(privateMaxGrade / 2);\n    return { grade, broken, rank: Rank.privateFirst };\n  }\n  if (corporal <= now && now < sergeant) {\n    const corporalMaxGrade = dateUtil.monthDiff(sergeant, corporal);\n    const grade = dateUtil.monthDiff(now, corporal) + 1;\n    const broken = grade > Math.ceil(corporalMaxGrade / 2);\n    return { grade, broken, rank: Rank.corporal };\n  }\n  if (sergeant <= now && now < discharge) {\n    const grade = dateUtil.monthDiff(now, sergeant) + 1;\n    const totalSergeantDays = dateUtil.dayDiff(discharge, sergeant);\n    const currSergeantDays = dateUtil.dayDiff(now, sergeant);\n    const broken = currSergeantDays > Math.ceil(totalSergeantDays / 2);\n    return { grade, broken, rank: Rank.sergeant };\n  }\n  if (discharge <= now) {\n    return { rank: Rank.fulfilled };\n  }\n  throw new Error('Never happend');\n}\n\nexport default function processPerson(person: PersonDao, now: Date): Person {\n  const promotionDates = calcPromotionDates(person);\n  const { rank, grade, broken } = calcStatus(promotionDates, now);\n  const rankString: string = rankToKorean(rank) + (grade ? ` ${grade}호봉` : '');\n\n  const { join, transfer, discharge } = promotionDates;\n  const daysTotal = dateUtil.dayDiff(discharge, join);\n  const daysPast = Math.min(dateUtil.dayDiff(now, join), daysTotal);\n  const daysLeft = Math.max(dateUtil.dayDiff(discharge, now), 0);\n  const secondsTotal = dateUtil.secondDiff(discharge, join);\n  const secondsPast = Math.min(dateUtil.secondDiff(now, join), secondsTotal);\n  const secondsLeft = Math.max(dateUtil.secondDiff(discharge, now), 0);\n\n  const currMs = now.getTime() - join.getTime();\n  const totalMs = discharge.getTime() - join.getTime();\n  const rate: number = currMs / totalMs;\n  const percent: string = (Math.min(1, Math.max(rate, 0)) * 100).toFixed(2);\n\n  return {\n    join,\n    transfer,\n    discharge,\n    rankString,\n    rank,\n    grade,\n    broken,\n    daysTotal,\n    daysPast,\n    daysLeft,\n    secondsTotal,\n    secondsPast,\n    secondsLeft,\n    percent,\n    name: person.name,\n  };\n}\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Person } from 'src/models';\n\nexport enum WelcomeStatus {\n  showing = 'showing',\n  closing = 'closing',\n  closed = 'closed',\n}\n\ninterface Props {\n  person: Person;\n  status: WelcomeStatus;\n  onTransitionEnd: (event: React.TransitionEvent<HTMLDivElement>) => void;\n}\n\nexport default ({ person, status, onTransitionEnd }: Props) => {\n  const { daysTotal, daysLeft, daysPast, broken, rank } = person;\n\n  // y = (total - (1 / total) * x^2) / 8\n  const blurLevel = (daysTotal - (1 / daysTotal) * (daysPast ** 2)) / 8;\n\n  const titleClasses = classnames('title', `rank-${rank}`, { broken });\n  const dateClasses = classnames('date', `rank-text-${rank}`, { broken });\n  const textShadow = { textShadow: `white 0 0 ${blurLevel}px` };\n\n  return (\n    <div id=\"welcome-layout\" className={status} onTransitionEnd={onTransitionEnd}>\n      <div id=\"welcome\">\n        <div className={titleClasses} style={textShadow}><strong>전역</strong></div>\n        <div className={dateClasses}>\n          D-\n          <strong>{daysLeft}</strong>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { Person } from 'src/models';\nimport { dateUtil } from 'src/utils';\nimport { CAN_DISCHARGE_DAY } from 'src/envs';\n\nconst { dateToString } = dateUtil;\n\ninterface Props {\n  person: Person;\n}\n\nexport default ({ person }: Props) => {\n  const { name, join, transfer, discharge, rank, rankString, broken, daysLeft, percent } = person;\n\n  const canDischarge = daysLeft < CAN_DISCHARGE_DAY;\n  const dates = `${dateToString(join)} 입대 - ${dateToString(transfer)} 전입 - ${dateToString(discharge)} 전역`;\n\n  return (\n    <div id=\"info-pane\" className=\"panel\">\n      <div className={classnames('panel-heading', `rank-${rank}`, { broken })} />\n      <div className=\"panel-body\">\n        <div className=\"name-info\">\n          <strong className=\"name\">{name}</strong>\n          <span className=\"rank\">{rankString}</span>\n          <div>\n            당신의 전역은\n            {' '}\n            <span className={classnames('bold', canDischarge ? 'dischargable' : 'not-dischargable')}>\n              {canDischarge ? '가능' : '불가'}\n            </span>\n            합니다.\n          </div>\n        </div>\n        <div className=\"date-info\">\n          <div className=\"dday\">\n            <div className={classnames('hex', `rank-${rank}`, { broken })}>\n              D-0x\n              <span className=\"bold\">\n                {daysLeft.toString(16).toUpperCase()}\n                <sub>(16)</sub>\n              </span>\n            </div>\n            <span className=\"percentage\">\n              {percent}\n              %\n            </span>\n          </div>\n          <div>\n            {dates}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport classnames from 'classnames';\nimport { dateUtil } from 'src/utils';\nimport { Person } from 'src/models';\n\nconst { dateToString, secondsToString } = dateUtil;\n\ninterface Props {\n  index: number;\n  person: Person;\n  isMe: boolean;\n}\n\nexport default ({ index, person, isMe }: Props) => {\n  const {\n    rank,\n    rankString,\n    broken,\n    percent,\n    daysPast,\n    daysTotal,\n    secondsPast,\n    secondsLeft,\n  } = person;\n\n  const active = !['fulfilled', 'human'].includes(rank.toString());\n  const progressParentClasses = classnames('progress', {\n    active,\n    'progress-striped': active,\n  });\n  const progressClasses = classnames(\n    'progress-bar',\n    `rank-${rank}`,\n    { broken },\n  );\n\n  const textInside = parseInt(percent) > 20;\n  const progressTextClass = classnames('text', textInside ? 'inside' : 'outside');\n  const progressTextContent = `${daysPast}/${daysTotal} (${percent}%)`;\n  const progressText = (daysPast > 0)\n    ? <span className={progressTextClass}>{progressTextContent}</span>\n    : null;\n\n  return (\n    <tr className={classnames({ me: isMe })}>\n      <td>{index + 1}</td>\n      <td>{person.name}</td>\n      <td>{rankString}</td>\n      <td>{dateToString(person.join)}</td>\n      <td>{dateToString(person.transfer)}</td>\n      <td>{dateToString(person.discharge)}</td>\n      <td>{secondsToString(secondsPast)}</td>\n      <td>{secondsToString(secondsLeft)}</td>\n      <td>\n        <div className={progressParentClasses}>\n          <div className={progressClasses} style={{ width: `${percent}%` }}>{textInside && progressText}</div>\n          {textInside || progressText}\n        </div>\n      </td>\n    </tr>\n  );\n};\n","import React from 'react';\nimport { Person } from 'src/models';\nimport PeopleRow from './PeopleRow';\n\ninterface Props {\n  me: Person;\n  persons: Person[];\n}\n\nexport default ({ me, persons }: Props) => {\n  const rows = persons.map((person, i) => {\n    const isMe = person.name === me.name && person.join.toDateString() === me.join.toDateString();\n    return <PeopleRow index={i} person={person} isMe={isMe} key={person.name + person.join} />;\n  });\n\n  return (\n    <div id=\"people-table\">\n      <table className=\"table table-striped table-hover\">\n        <thead>\n          <tr>\n            <th className=\"no\">#</th>\n            <th className=\"name\">이름</th>\n            <th className=\"rank\">계급</th>\n            <th className=\"date-start\">입대일</th>\n            <th className=\"date-transfer\">전입일</th>\n            <th className=\"date-end\">전역일</th>\n            <th className=\"days-past\">지난시간</th>\n            <th className=\"days-left\">남은시간</th>\n            <th className=\"progressbar\">{' '}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {rows}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import { combineReducers, configureStore, createSlice } from '@reduxjs/toolkit';\n\nimport { PersonDao } from 'src/models';\nimport { dateUtil } from 'src/utils';\n\nconst peopleSlice = createSlice({\n  name: 'people',\n  initialState: [] as PersonDao[],\n  reducers: {\n    setPeople: (_, act) => act.payload,\n  }\n})\n\nconst nowSlice = createSlice({\n  name: 'now',\n  initialState: new Date().getTime(),\n  reducers: {\n    setNow: (_, act: { payload: number, type: string }) => act.payload,\n    addOneSec: (state) => state + 1000,\n    setNowDate: (state, act: { payload: string, type: string }) => dateUtil.setDate(new Date(state), new Date(act.payload)).getTime(),\n  }\n})\n\nconst settingSlice = createSlice({\n  name: 'setting',\n  initialState: { name: '', date: '', target: '' },\n  reducers: {\n    setSetting: (_, act) => act.payload,\n  }\n});\n\nconst rootReducer = combineReducers({\n  people: peopleSlice.reducer,\n  now: nowSlice.reducer,\n  setting: settingSlice.reducer,\n});\n\nexport const store = configureStore({ reducer: rootReducer })\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport type RootDispatch = typeof store.dispatch;\n\nexport const { addOneSec, setNow, setNowDate } = nowSlice.actions;\nexport const { setPeople } = peopleSlice.actions;\nexport const { setSetting } = settingSlice.actions;\n","import axios, { AxiosResponse } from 'axios';\nimport { DATE_HEADER_NAME, NAME_HEADER_NAME } from 'src/envs';\nimport { PersonDao } from 'src/models';\n\nexport default function request(data?: { name: string, date: string }): Promise<PersonDao[]> {\n  return new Promise((resolve, reject) => {\n    const headers = (data)\n      ? {\n        [NAME_HEADER_NAME]: encodeURI(data.name),\n        [DATE_HEADER_NAME]: encodeURI(data.date),\n      }\n      : {};\n\n    axios({\n      url: 'https://home.hyunsub.kim:4284',\n      headers,\n    }).then((res: AxiosResponse) => {\n      resolve(res.data);\n    }).catch((err) => {\n      reject(err);\n    });\n  });\n}\n","import React, { useCallback, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { NAME_HEADER_NAME, DATE_HEADER_NAME, TARGET_DATE_NAME } from 'src/envs';\nimport { RootState, setNowDate, setPeople, setSetting } from 'src/redux';\nimport { PersonDao } from 'src/models';\nimport request from 'src/api';\n\nconst LoginModal = () => {\n  const dispatch = useDispatch();\n  const setting = useSelector((state: RootState) => state.setting);\n  const [errMsg, setErrMsg] = useState('');\n\n  const { name, date, target } = setting;\n\n  const onSubmit = useCallback(() => {\n    const name = (document.getElementById(NAME_HEADER_NAME) as HTMLInputElement).value;\n    const date = (document.getElementById(DATE_HEADER_NAME) as HTMLInputElement).value;\n    const target = (document.getElementById(TARGET_DATE_NAME) as HTMLInputElement).value;\n\n    if (!name || !date) {\n      setErrMsg('이름과 입대일을 입력해 주세요.');\n      return;\n    }\n\n    if (isNaN(new Date(target).getTime())) {\n      setErrMsg('올바른 \\'돌아가고 싶은 날짜\\'를 입력해 주세요.');\n      return;\n    }\n\n    request({ name, date })\n      .then((people: PersonDao[]) => {\n        if (people.length === 0) {\n          setErrMsg('해당 데이터는 존재하지 않습니다.');\n        } else {\n          if (target) {\n            dispatch(setNowDate(target));\n          } else {\n            const transfer = people.find(v => v.name === name && v.join === date)!.transfer;\n            dispatch(setNowDate(transfer));\n          }\n          dispatch(setPeople(people));\n          dispatch(setSetting({ name, date, target }));\n          (document.getElementById('cancel-btn') as HTMLButtonElement).click();\n          setErrMsg('');\n        }\n      })\n      .catch((err) => {\n        alert(err.toString());\n      });\n  }, [dispatch]);\n\n  return (\n    <div id=\"myModal\" className=\"modal fade\" role=\"dialog\">\n      <div className=\"modal-dialog\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <button type=\"button\" className=\"close\" data-dismiss=\"modal\">&times;</button>\n            <h4 className=\"modal-title\">본인의 정보 입력</h4>\n          </div>\n          <div className=\"modal-body\">\n            <p>이 데이터에 본인이 있는 것 같은 경우 본인의 실명과 입대일을 입력해주세요.</p>\n            <form id=\"login-form\" action=\"/action_page.php\">\n              <div className=\"form-group\">\n                <label>이름</label>\n                <input type=\"text\" className=\"form-control\" id={NAME_HEADER_NAME} placeholder=\"홍길동\" defaultValue={name} />\n              </div>\n              <div className=\"form-group\">\n                <label>입대일</label>\n                <input type=\"text\" className=\"form-control\" id={DATE_HEADER_NAME} placeholder=\"2020-01-01\" defaultValue={date} />\n              </div>\n              <div className=\"form-group\">\n                <label>돌아가고 싶은 날짜 (Optional)</label>\n                <input type=\"text\" className=\"form-control\" id={TARGET_DATE_NAME} placeholder=\"2020-01-01\" defaultValue={target} />\n              </div>\n            </form>\n            {errMsg && <p style={{ color: 'red' }}>{errMsg}</p>}\n          </div>\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"btn btn-primary\" onClick={onSubmit}>Apply</button>\n            <button type=\"button\" className=\"btn btn-default\" data-dismiss=\"modal\" id=\"cancel-btn\">Cancel</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default React.memo(LoginModal);","import React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { DISCHARGE_START_DATE } from 'src/envs';\nimport { RootState, setNow } from 'src/redux';\nimport { dateUtil } from 'src/utils';\n\nexport default () => {\n  const dispatch = useDispatch();\n  const people = useSelector((state: RootState) => state.people);\n  const now = new Date(useSelector((state: RootState) => state.now));\n\n  const min = dateUtil.dayDiff(new Date(DISCHARGE_START_DATE), new Date());\n  const max = (people.length > 0)\n    ? dateUtil.dayDiff(new Date(people[people.length - 1].discharge), new Date())\n    : dateUtil.dayDiff(new Date(Date.now() + 1), new Date());\n  const value = dateUtil.dayDiff(now, new Date());\n\n  const onChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(e.target.value);\n    const n = dateUtil.addDay(new Date(), value);\n    dispatch(setNow(n.getTime()));\n  }, [dispatch]);\n\n  return (\n    <input type=\"range\" min={min} max={max} value={value} onChange={onChange} />\n  )\n}","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport classnames from 'classnames';\n\nimport { DateRangeInput, Header, InfoPane, PeopleTable, SettingModal, WelcomeOverlay } from './components';\nimport { FULFILLED_REMAIN_DAYS, WELCOME_SHOW_MILLIS } from './envs';\nimport { WelcomeStatus } from './components/WelcomeOverlay';\nimport { addOneSec, RootState, setPeople } from './redux';\nimport { dateUtil, processToPerson } from './utils';\nimport { Person } from './models';\nimport request from './api';\nimport './App.scss';\n\nexport default function App() {\n  const dispatch = useDispatch();\n  const [welcomeStatus, setWelcomeStatus] = useState(WelcomeStatus.showing);\n  const people = useSelector((state: RootState) => state.people);\n  const now = new Date(useSelector((state: RootState) => state.now));\n  const { name } = useSelector((state: RootState) => state.setting);\n\n  useEffect(() => {\n    request()\n      .then((peopleParam) => {\n        dispatch(setPeople(peopleParam));\n\n        setInterval(\n          () => dispatch(addOneSec()),\n          1000,\n        );\n      });\n  }, [dispatch]);\n\n  useEffect(() => {\n    setWelcomeStatus(WelcomeStatus.showing);\n    setTimeout(() => setWelcomeStatus(WelcomeStatus.closing), WELCOME_SHOW_MILLIS);\n  }, [people]);\n\n  if (people.length === 0) {\n    return <div />;\n  }\n\n  const persons: Person[] = people\n    .filter((p) => dateUtil.dayDiff(now, new Date(p.discharge)) < FULFILLED_REMAIN_DAYS)\n    .filter((p) => new Date(p.transfer) < now)\n    .map((p) => processToPerson(p, now));\n\n  const me = (name)\n    ? processToPerson(people.find(v => v.name === name)!, now)\n    : persons[0];\n\n  return (\n    <>\n      <WelcomeOverlay\n        person={me}\n        status={welcomeStatus}\n        onTransitionEnd={() => setWelcomeStatus(WelcomeStatus.closed)}\n      />\n      <Header className={classnames({ blur: welcomeStatus !== WelcomeStatus.closed })} />\n      <div className={classnames('container-fluid', { blur: welcomeStatus !== WelcomeStatus.closed })} style={{ marginTop: '60px' }}>\n        <InfoPane person={me} />\n        <h1>{new Date(now).toLocaleString()}</h1>\n        <DateRangeInput />\n        <PeopleTable me={me} persons={persons} />\n      </div>\n      <SettingModal />\n    </>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { store } from './redux';\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}